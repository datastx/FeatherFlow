version: 2

models:
  - name: monthly_trends
    description: Monthly transaction trends and patterns
    meta:
      owner: "finance_team"
      tags: ["mart", "finance", "monthly", "trends"]
    config:
      materialized: table
    database_name: analytics
    schema_name: marts_finance
    object_name: monthly_trends
    columns:
      - name: year
        description: Year of analysis
        data_type: integer
      - name: month
        description: Month of analysis (1-12)
        data_type: integer
      - name: month_start_date
        description: First day of the month
        data_type: date
      - name: month_end_date
        description: Last day of the month
        data_type: date
      - name: total_transactions
        description: Total number of transactions in the month
        data_type: integer
      - name: total_transaction_amount
        description: Total amount of all transactions in the month
        data_type: decimal
      - name: avg_daily_transactions
        description: Average number of transactions per day in the month
        data_type: decimal
      - name: avg_transaction_amount
        description: Average transaction amount in the month
        data_type: decimal
      - name: total_inflows
        description: Total amount of incoming transactions
        data_type: decimal
      - name: total_outflows
        description: Total amount of outgoing transactions
        data_type: decimal
      - name: net_flow
        description: Net cash flow (inflows - outflows)
        data_type: decimal
      - name: unique_customers
        description: Number of unique customers transacting in the month
        data_type: integer
      - name: unique_merchants
        description: Number of unique merchants transacting in the month
        data_type: integer
      - name: top_spending_category
        description: Category with the highest spending in the month
        data_type: string
      - name: top_spending_amount
        description: Amount spent in the top spending category
        data_type: decimal
      - name: mom_transaction_change_pct
        description: Month-over-month percentage change in transaction count
        data_type: decimal
      - name: mom_amount_change_pct
        description: Month-over-month percentage change in transaction amount
        data_type: decimal
      - name: yoy_transaction_change_pct
        description: Year-over-year percentage change in transaction count
        data_type: decimal
      - name: yoy_amount_change_pct
        description: Year-over-year percentage change in transaction amount
        data_type: decimal